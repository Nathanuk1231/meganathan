<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cool Website â€“ Liquid Glass</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet"/>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:Orbitron,sans-serif;
  color:#eaffea;
  min-height:100vh;
  background:linear-gradient(-45deg,#001a0d,#003319,#004d26,#00ff80);
  background-size:400% 400%;
  animation:bg 20s infinite;
}
@keyframes bg{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.nav{
  position:fixed;top:20px;z-index:99;
  background:rgba(0,255,100,.15);
  backdrop-filter:blur(20px);
  border-radius:50px;
  padding:12px 30px;
  display:flex;gap:18px;flex-wrap:wrap;
}
.nav a{color:#aaffaa;cursor:pointer;text-decoration:none}
.nav a:hover{color:#00ff80}
.container{
  margin-top:120px;
  padding:30px;
  width:90%;max-width:900px;
  background:rgba(255,255,255,.08);
  border-radius:30px;
  backdrop-filter:blur(20px);
}
.button{
  background:rgba(0,255,100,.2);
  border:none;
  padding:10px 20px;
  border-radius:12px;
  color:#aaffaa;
  cursor:pointer;
}
.chat-box{
  background:rgba(0,0,0,.4);
  border-radius:20px;
  padding:10px;
  max-height:350px;
  overflow-y:auto;
}
.message{
  margin:6px 0;
  padding:8px;
  border-radius:10px;
  background:rgba(0,255,100,.08);
}
.delete{color:#ff4d4d;cursor:pointer;margin-left:10px}
</style>
</head>

<body>

<div class="nav" id="nav">
  <a onclick="showHome()">Home</a>
  <a onclick="showGaming()">Gaming</a>
  <a onclick="showChat()">Chat</a>
  <a onclick="showMusic()">Music</a>
  <a onclick="showAIDog()">AI Dog</a>
  <a onclick="login()">Login</a>
</div>

<div id="content" class="container"></div>

<script>
/* FIREBASE */
firebase.initializeApp({
  apiKey: "AIzaSyDgddDLpa2XSLvzNBzSd1dkkkZ5Kt32axM",
  authDomain: "coolwebsitechat.firebaseapp.com",
  databaseURL: "https://coolwebsitechat-default-rtdb.firebaseio.com",
  projectId: "coolwebsitechat"
});

const db = firebase.database();
const auth = firebase.auth();

const ADMIN_EMAIL = "nathanjlloyd123@gmail.com";
let bannedUsers = {};
const bansRef = db.ref("bans");

bansRef.on("value",s=>bannedUsers=s.val()||{});

/* AUTH */
auth.onAuthStateChanged(user=>{
  const nav=document.getElementById("nav");
  if(user && user.email===ADMIN_EMAIL){
    if(!document.getElementById("adminBtn")){
      const a=document.createElement("a");
      a.id="adminBtn";
      a.textContent="Admin";
      a.onclick=showAdmin;
      nav.appendChild(a);
    }
  } else {
    const a=document.getElementById("adminBtn");
    if(a) a.remove();
  }
});

/* LOGIN */
function login(){
  auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());
}

/* NAV */
function setContent(h){content.innerHTML=h}
function showHome(){setContent(`<h1>Welcome</h1><p>Liquid Glass Website</p>`)}
function showGaming(){setContent(`<iframe src="https://chromedino.com/" width="100%" height="400"></iframe>`)}
function showMusic(){setContent(`<h2>Music</h2><iframe id="yt" width="100%" height="315"></iframe>`)}
function showAIDog(){setContent(`<iframe src="https://levkris.github.io/ai-dog/" width="100%" height="600" allow="camera;microphone"></iframe>`)}
function showChat(){loadChat()}

/* CHAT */
function loadChat(){
  setContent(`
    <h2>Chat</h2>
    <div class="chat-box" id="chat"></div>
    <input id="msg"><button class="button" onclick="send()">Send</button>
  `);

  db.ref("messages").off();
  db.ref("messages").on("child_added",s=>{
    const m=s.val();
    if(bannedUsers[m.name])return;
    const div=document.createElement("div");
    div.className="message";
    div.innerHTML=`<b>${m.name}</b>: ${m.text}
      ${isAdmin()?`<span class="delete" onclick="del('${s.key}')">[X]</span>`:""}`;
    chat.appendChild(div);
  });
}

function send(){
  const user=auth.currentUser;
  if(bannedUsers[user?.displayName]) return alert("Banned");
  db.ref("messages").push({
    name:user?user.displayName:"Guest",
    text:msg.value
  });
  msg.value="";
}

function del(k){
  if(!isAdmin())return;
  db.ref("messages/"+k).remove();
}

/* ADMIN */
function isAdmin(){
  return auth.currentUser && auth.currentUser.email===ADMIN_EMAIL;
}

function showAdmin(){
  if(!isAdmin()){
    alert("Access denied");
    showHome();
    return;
  }

  setContent(`
    <h1>Admin Panel</h1>
    <button class="button" onclick="showBans()">Ban List</button>
    <div id="adminArea"></div>
  `);
}

function showBans(){
  if(!isAdmin())return;
  adminArea.innerHTML="";
  Object.keys(bannedUsers).forEach(u=>{
    adminArea.innerHTML+=`
      <div class="message">${u}
        <span class="delete" onclick="unban('${u}')">Unban</span>
      </div>`;
  });
}

function unban(u){
  if(!isAdmin())return;
  bansRef.child(u).remove();
}

/* START */
showHome();
</script>

</body>
</html>
